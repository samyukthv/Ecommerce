{{>navbar}}


<div style="display: flex;">
    {{>sidebar}}

    <div style="margin-top: 70px; width:100%">



        <div class="col-lg-12 grid-margin stretch-card">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title"
                        style="text-align: center; font-size: 28px; font-weight: bold; color: #aef7f8; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 20px;">
                        Coupon List</h4>

                    <div class="table-responsive">
                        <table class="table table-striped" id="Table" style="color: white;">
                            <thead>
                                <tr style="height: 50px;">
                                    <th>S.No </th>
                                    <th>Coupon Code</th>
                                    <th>Added Date</th>
                                    <th>Discount percent</th>
                                    <th>Status</th>
                                    <th>Expire Date</th>
                                    <th></th>


                                </tr>
                            </thead>
                            <tbody>
                                {{#each couponfind}}
                                <tr style="height: 50px;">
                                    <td class="py-1">
                                        {{inc @index}}
                                    </td>
                                    <td>{{this.couponId}}</td>
                                    <td>{{ formatDate this.addDate}}</td>
                                    <td>{{this.discount}}</td>
                                    <td>{{this.status}}</td>
                                    <td>{{formatDate this.expDate}}</td>
                                    <td>
                                        <a>
                                            <span class="me-3" onclick="alerted('{{this._id}}')">
                                                <i class="fa-solid fa-trash-alt"></i>
                                            </span>
                                        </a>
                                        {{!-- <a><button type="button" class="btn btn-primary">hy</button></a> --}}
                                        <a class="ml-3" style="margin-left: 10px;" href="{{this._id}}">
                                            <i class="fa-solid fa-edit"></i>
                                        </a>
                                    </td>

                                </tr>
                                {{/each}}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>



        <script>

         
  function alerted(proId) {
    Swal.fire({
     
      title: 'Are you sure?',
      text: "you want to delete this coupon permanently",
      icon: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#d33',
      cancelButtonColor: '#3085d6',
      confirmButtonText: 'Yes,blocked it'
    }).then((result) => {

      $.ajax({

        url: '/admin/deleteCoupon/' + proId,
        method: 'get',
        success: (response) => {
          if (result.isConfirmed) {
            console.log("hellooooooooooooooooooo")
           Swal.fire({
              icon: 'success',
              title: 'category deleted successfully',
              showConfirmButton: false,
            })
            setTimeout(() => {
              location.reload()
            }, 800)
          }
        }
      })

    })
  }



        </script>









        {{>footer}}